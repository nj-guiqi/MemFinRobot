
## 实验结果汇总

MemFinRobot:/Users/nijian.15/projects/MemFinRobot/eval/runs/20260220_082913/report.md

mem0:/Users/nijian.15/projects/MemFinRobot/eval/runs/20260220_155804/report_mem0.md

LLM:/Users/nijian.15/projects/MemFinRobot/eval/runs/20260221_085707/report_llm.md

FinRobot:/Users/nijian.15/projects/MemFinRobot/eval/runs/20260222_055021/report_finrobot.md

LangMem:/Users/nijian.15/projects/MemFinRobot/eval/runs/20260222_072551/report_langmem.md

## 汇总结果

注：带 `↓` 表示越低越好；`LLM` 的 `m1_*` 因 `eligible_count=0` 记为 `-`；`mem0/LLM/FinRobot/LangMem` 的 `m4_*` 已用 `ComplianceGuard` 基于 `pred_assistant_text` 重新计算（替代适配器硬编码合规）。

| Method | run_id | m1_key_cov | m1_strict_hit | m1_contra↓ | m1_short_hit | m1_long_hit | m1_profile_hit | m2_profile_score | m3_risk_cov | m3_strict_risk | m4_acc | m4_severe↓ | m5_rubric_hit | m5_judge_mean |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| MemFinRobot | 20260220_082913 | 0.2686 | 0.1339 | 0.4812 | 0.2370 | 0.0790 | 0.0174 | 0.1853 | 0.4780 | 0.1270 | 0.5458 | 0.4024 | 0.9209 | 4.6769 |
| mem0 | 20260220_155804 | 0.3440 | 0.1520 | 0.6858 | 0.3427 | 0.0539 | 0.0000 | 0.1716 | 0.5412 | 0.1495 | 0.3204 | 0.6634 | 0.9085 | 4.6372 |
| LLM | 20260221_085707 | - | - | - | - | - | - | 0.1625 | 0.5361 | 0.1494 | 0.5380 | 0.4241 | 0.8704 | 4.4683 |
| FinRobot | 20260222_055021 | 0.3622 | 0.1518 | 0.6238 | 0.3622 | 0.0000 | 0.0000 | 0.1679 | 0.5097 | 0.1494 | 0.5443 | 0.4525 | 0.8934 | 4.5462 |
| LangMem | 20260222_072551 | 0.3697 | 0.1551 | 0.7525 | 0.3672 | 0.0539 | 0.0000 | 0.1865 | 0.4500 | 0.1364 | 0.4652 | 0.5285 | 0.8593 | 4.4102 |

## 指标分析

### M2：用户画像对齐（m2_profile_score）

M2 上各方法差异较小但排序稳定：LangMem 为 0.1865、MemFinRobot 为 0.1853、mem0 为 0.1716、FinRobot 为 0.1679、纯 LLM 为 0.1625。该结果表明，画像对齐并非仅靠“有无记忆”即可显著拉开差距，而取决于是否能将画像信号沉淀为可复用的结构化状态并在后续轮次持续保持一致。

M2 评估对话级画像对齐能力，涵盖风险等级、投资期限、流动性需求等离散字段，以及约束/偏好集合的匹配。评测实现优先使用轨迹中的结构化 `profile_snapshot`，缺失时才基于全对话文本进行回退推断，因此该指标更偏向衡量“画像是否被显式建模并可稳定复用”，而不仅是单轮回复里是否偶然出现若干画像词汇。

MemFinRobot 在该指标上接近最优，主要得益于其显式画像维护与记忆管理设计，使画像字段能够跨轮更新、持久化并以结构化方式参与后续决策，从而降低跨轮漂移与遗忘带来的对齐误差。相对地，纯 LLM 缺少跨轮状态，画像只能依赖即时文本线索被动推断；FinRobot 侧重工具与流程编排，画像并非核心建模对象；mem0/LangMem 的“检索-拼接”式记忆注入若缺少稳定的画像抽取与更新，容易引入召回噪声或造成字段不一致。值得注意的是，LangMem 在 M2 上略高于 MemFinRobot（0.1865 vs 0.1853），说明在当前口径与样本规模下二者差距处于很小量级；但 MemFinRobot 的优势在于其画像状态可与合规约束与解释生成联动，从而在更关键的安全与可解释交付目标上形成一致性提升（见 M4、M5）。

### M4：内容合规（m4_acc / m4_severe↓）

M4 上 MemFinRobot 明确领先：`m4_acc=0.5458` 为最高、`m4_severe=0.4024` 为最低；FinRobot 与 LLM 的 `m4_acc` 接近（0.5443 vs 0.5380），但 `m4_severe` 分别为 0.4525 与 0.4241；LangMem 的 `m4_acc` 为 0.4652 且 `m4_severe` 为 0.5285；mem0 风险最突出（`m4_acc=0.3204`, `m4_severe=0.6634`）。值得注意的是，基线方法的 `m4_*` 已在同一后验合规模块（ComplianceGuard）口径下重算，MemFinRobot 仍保持领先，说明其优势主要来自生成时的合规约束与整体工作流设计，而非评测口径差异。该结果直接表明：金融对话的安全与合规需要在系统层显式建模与约束，单纯引入记忆或工具并不足以保证底线风险可控。

从能力刻画看，M4 衡量输出的合规等级一致性与严重违规触发率。预测合规标签由轨迹中的合规事件与禁区命中共同决定，且禁区命中将直接判定为 `severe_violation`，因此 `m4_severe` 可以理解为触发高风险红线表达的发生率。MemFinRobot 在生成阶段引入合规防护与风险表达约束，能够主动抑制禁区措辞与高风险承诺式表达，从而显著降低严重违规；而 mem0/LangMem 的召回注入若缺少“合规优先”的过滤与重写，可能将历史片段中的高风险措辞带入当前回复并放大触发概率；FinRobot/LLM 缺少专门的红线抑制与审校环节，因此在严重违规率上难以达到 MemFinRobot 的水平。

因此，`m4_acc` 与 `m4_severe` 的“同时占优”更能体现 MemFinRobot 的方法优势：不仅与 GT 合规等级更一致，而且在最关键的底线风险事件上具备更低的触发频率，符合金融场景对安全交付的核心要求。

### M5：决策辅助解释度（m5_rubric_hit / m5_judge_mean）

M5 上 MemFinRobot 同样排名第一：`m5_rubric_hit=0.9209`、`m5_judge_mean=4.6769`；其后为 mem0（0.9085, 4.6372）、FinRobot（0.8934, 4.5462）、LLM（0.8704, 4.4683）、LangMem（0.8593, 4.4102）。其中 `m5_judge_mean` 为基于 rubric 命中率的 1–5 分启发式映射均值，因此两列可视为同一能力的不同量纲呈现。

该指标刻画的是决策辅助解释要素覆盖能力，即回复是否稳定包含依据与假设、风险收益权衡、可执行步骤、边界条件与风险提示等 rubric 项。MemFinRobot 的领先与其系统设计一致：工具链输出的证据与中间结果为解释提供了可引用的信息载体，工作流约束使得这些信息更容易被组织为结构化论证，从而提升 rubric 覆盖的稳定性。相对地，纯 LLM 的解释更依赖通用话术，易出现要素缺失；mem0/LangMem 的检索式注入并不等同于解释结构，召回噪声可能占据篇幅并导致覆盖不稳定；FinRobot 侧重流程完成，对解释要素覆盖缺少显式驱动，因此整体落后于 MemFinRobot。

综合而言，MemFinRobot 在 M5 的领先意味着其更接近金融咨询的可交付形态：解释要素齐备且可审计；与 M4 的显著优势共同说明本文方法不仅“能给建议”，更能在安全约束下给出结构化、可解释的决策支持输出。
